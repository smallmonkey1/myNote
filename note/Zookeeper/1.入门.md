### 概述：

ZK是一个开源的分布式的，为分布式应用提供协调服务的Apache项目。

Zookeeper从设计模式角度来理解:是-一个基
于观察者模式设计的分布式服务管理框架,它**负**
**责存储和管理大家都关心的数据,**然后**接受观察**
**者的注册**,一旦这些数据的状态发生变化
Zookeeper就将**负责通知已经在Zookeeper.上注册**
**的那些观察者**做出相应的反应。

![image-20200326141610989](E:\Desktop\note\Zookeeper\1.入门.assets\image-20200326141610989.png)



### 特点：

![image-20200326141724119](E:\Desktop\note\Zookeeper\1.入门.assets\image-20200326141724119.png)

ZK：一个领导者(Leader)，多个跟随者(Follower)组成的集群

集群中只要有半数以上节点存货，ZK集群就能正常服务

全局数据一致：每个Server保存一份相同的数据副本，Client无论连接到哪个Server，数据都是一致的。

更新请求顺序进行，来自同一个Client的更新请求，按其发送顺序依次执行。

数据更新原子性，依次数据更新，要么成功，要么失败(事务特点)

实时性，在一定时间范围内Client能读到最新数据。





### 数据结构：

![image-20200326142257748](E:\Desktop\note\Zookeeper\1.入门.assets\image-20200326142257748.png)

ZK数据模型的结构与**Unix文件系统**很类似，整体上可以看做一棵**树**，每个节点成为一个ZNode。每个Znode默认能够存储**1MB**数据，每个ZNode都可以通过其路径**唯一**标识。

### 应用场景：

提供服务包括：统一命名服务、同一配置管理、同一集群管理、服务器节点动态上下线、软负载均衡等。

#### 统一命名服务：

在分布式环境下，经常需要对应用/服务进行统一命名，便于识别。

例如：IP不容易记住，而域名容易记住。

![image-20200326143015468](E:\Desktop\note\Zookeeper\1.入门.assets\image-20200326143015468.png)

#### 同一配置管理：

分布式环境下，配置文件同步非常常见。

* 一般要求一个集群中，所有节点的配置信息是一致的，比如Kafka集群。
* 对配置文件修改后，希望能够快速同步到各个节点上。

配置管理可交由ZK实现

* 将配置信息写入ZK上的ZNode。
* 每个客户端服务器监听这个Znode。
* 一旦Znode中的数据被修改，ZK将通知每个客户端服务器。



![image-20200326143206968](E:\Desktop\note\Zookeeper\1.入门.assets\image-20200326143206968.png)

#### 统一集群管理：

分布式环境中，实时掌握每个节点的状态是必要的。

* 可根据节点实时状态做出一些调整。

ZK可以实现实时监控节点状态变化。

* 可将节点信息写入ZK上的一个ZNode。
* 监听这个ZNode可获取他的实时状态变化。

#### 服务器动态上下线：

客户端能实时洞察到服务器上下线的变化

#### 软负载均衡：

在ZK中记录每台服务器的访问数，让访问数最少的服务器去处理最新的客户端请求。





### 下载地址：

[官网](https://zookeeper.apache.org/)