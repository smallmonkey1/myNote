### 悲观锁/乐观锁/CAS(Check And Set)

#### 悲观锁：

表锁：

一人上厕所全部不能上(一人占20个坑)

并发差

数据库备份的时候需要这个锁



#### 乐观锁：

行锁；

一般就是乐观锁

需要一个版本号

**策略：提交版本必须大于记录当前版本才能执行更新，等于也不行**

#### CAS：

---

初始化信用卡余额和欠额

无加塞篡改，先监控再开启multi,保证两笔金额变动在同一事务内

有加塞篡改

unwatch

一旦执行了exec之前加的监控锁都会被取消掉