细品类的加载过程.

详拆运行时数据区的各个结构

String的前世今生

垃圾标记与清除阶段算法

各垃圾回收器的吞吐量优先与低延迟

触摸你又爱又恨的字节码指令

# 字节码

我们平时说的java字节码，指的是用java语言编译成的字节码。

准确的说任何能在jvm平台上执行的字节码格式都是一样的。 所以应该统称为:
**jvm字节码。** 
●不同的编译器，可以编译出相同的 字节码文件，字节码文件也可以在不同
的 **JVM上运行** 。
●Java虚拟机与Java语言并没有必然的联系，它只与特定的二进制文
件格式一Class文件格式所关联， Class 文件中包含了Java 虚拟机指
令集(或者称为字节码、Bytecodes) 和符号表，还有一些其他辅助信息。.



# JVM生命周期

## 虚拟机的启动

Java虛拟机的启动是通过引导类加载器(bootstrap class loader) 创建一个初始类(initial class) 来完成的，这个类是由虚拟机的具体实现指定的。



## 虚拟机的执行

一个运行中的Java虚拟机有着一个清晰的任务:执行Java程序。

程序开始执行时他才运行，程序结束时他就停止。

执行一个所谓的Java程序的时候，真真正正在执行的是一个叫做Java虚拟机的进程。



## 虚拟机的退出

有如下的几种情况：

1. 程序正常执行结束
2. 程序在执行过程中遇到了异常或错误而异常终止
3. 由于操作系统出现错误而导致Java虚拟机进程终止
4. 某线程调用 Runtime 类或 System 类的 exit 方法，或 Runtime 类的 halt 方法，并且 Java 安全管理器也允许这次 exit 或 halt 操作。
5. 除此之外，JNI（Java Native Interface）规范描述了用 JNI Invocation API 来加载或卸载 Java 虚拟机时，Java 虚拟机的退出情况。



# JVM发展历程

## Sun Classic VM

1996；

世界上第一款商用Java虚拟机，

jdk1.4时完全被淘汰；

只提供解释器

## Exact VM

产生于jdk1.2

具备现代高性能虚拟机的雏形

* 热点探测
* 编译器与解释器混合工作模式

很快就被 HotsPot VM 替代

## HotSpot VM

目前Hotspot占有绝对的市场地位，称霸武林。
➢不管是现在仍在广泛使用的JDK6，还是使用比例较多的JDK8中，默认的虚拟机都是
HotSpot

➢sun/Oracle JDK和openJDK的默认虚拟机

➢因此本课程中默认介绍的虛拟机都是HotSpot,相关机制也主要是指HotSpot的GC机制。(比如其他两个商用虚拟机都没有方法区的概念)从服务器、桌面到移动端、嵌入式都有应用。

名称中的HotSpot指的就是它的 **热点代码探测技术**。
➢通过计数器找到最具编译价值代码，触发即时编译或栈上替换
➢通过编译器与解释器协同工作，在最优化的程序响应时间与最佳执行性能中取得平衡

## JRockit VM

专注于服务端的虚拟机，执行性能最佳的商用虚拟机

## IBM J9 VM

市场定位于HotSpot接近，服务器端、桌面应用、嵌入式等多用途VM 

广泛用于IBM的各种Java产品

有影响力的三大商用虚拟机之一



## Graal VM

2018发布，号称 ”Run Programs Faster Anywhere“

在HotSpot VM 的基础上增强成的 **跨语言全栈虚拟机** ，可以作为 任何语言 的运行平台使用。包括 Java、C、C++、Groovy、Kotlin、Ruby、Python、R、JS等

支持不同语言混用对方的接口和对象









